<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User List</title>
</head>
<body>
    <h1>User List</h1>
    <table border="1">
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="userTable"></tbody>
    </table>

    <script>
        async function fetchUsers() {
            const res = await fetch('/users');
            const users = await res.json();
            const table = document.getElementById('userTable');
            table.innerHTML = '';
            users.forEach(user => {
                table.innerHTML += `
                    <tr>
                        <td>${user.name}</td>
                        <td>${user.email}</td>
                        <td>
                            <button onclick="deleteUser('${user._id}')">Delete</button>
                            <button onclick="editUser('${user._id}', '${user.name}', '${user.email}')">Edit</button>
                        </td>
                    </tr>
                `;
            });
        }

        async function deleteUser(id) {
            await fetch('/deleteUser/' + id, { method: 'DELETE' });
            fetchUsers();
        }

        function editUser(id, name, email) {
            const newName = prompt("Edit name:", name);
            const newEmail = prompt("Edit email:", email);
            if (newName && newEmail) {
                fetch('/updateUser/' + id, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name: newName, email: newEmail })
                }).then(() => fetchUsers());
            }
        }

        fetchUsers();
    </script>
</body>
</html>
